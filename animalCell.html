<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JCE Animal Cell AR – 3D Labels</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

<style>
body{margin:0;overflow:hidden;font-family:Segoe UI,sans-serif;}
#status-label,#gps-debug{
 position:fixed;left:10px;padding:6px 12px;
 background:rgba(0,0,0,.7);color:orange;
 border-radius:20px;font-size:11px;z-index:999;
}
#status-label{top:10px;}
#gps-debug{top:45px;}
#teacher-panel{
 position:fixed;top:10px;right:10px;
 background:rgba(60,60,60,.9);
 padding:10px;border-radius:12px;
 width:160px;color:orange;
 border:1px solid orange;z-index:999;
}
.teacher-btn{
 width:100%;margin:4px 0;
 padding:8px;border-radius:8px;
 background:#800000;color:orange;
 border:1px solid orange;
 font-size:11px;font-weight:bold;
}
#help-bar{
 position:fixed;bottom:20px;left:50%;
 transform:translateX(-50%);
 background:rgba(128,0,0,.85);
 color:orange;padding:10px 20px;
 border-radius:30px;width:85%;
 text-align:center;z-index:999;
}
</style>
</head>

<body>

<div id="status-label">MODE: HIRO MARKER</div>
<div id="gps-debug">GPS: waiting</div>

<div id="teacher-panel">
 <div style="text-align:center;"> TEACHER</div>
 <button class="teacher-btn" onclick="toggleARMode()"> GPS / MARKER</button>
 <button class="teacher-btn" onclick="toggleLabels()"> LABELS</button>
 <button class="teacher-btn" onclick="toggleVoice()"> VOICE</button>
</div>

<div id="help-bar">
 <span id="instruction">Point at HIRO marker</span>
</div>

<a-scene embedded vr-mode-ui="enabled:false"
 arjs="sourceType:webcam;trackingMethod:best;locationEnabled:true;">

<a-camera gps-camera="minDistance:5"
 look-controls cursor="rayOrigin:mouse"
 raycaster="objects:.clickable"></a-camera>

<!-- ================= CELL MODEL ================= -->
<a-entity id="cellModel">

<!-- CELL MEMBRANE -->
<a-entity>
 <a-sphere class="clickable" radius="1"
  material="color:#ffddc1;opacity:.25;transparent:true"
  data-title="Cell Membrane"
  data-desc="Controls movement of substances in and out of the cell."></a-sphere>

 <a-text class="label" value="Cell Membrane"
  position="0 1.1 0" scale="0.6 0.6 0.6"
  align="center" look-at="[camera]"
  color="yellow"></a-text>
</a-entity>

<!-- NUCLEUS -->
<a-entity position="0 0 0">
 <a-sphere class="clickable" radius="0.3" color="purple"
  data-title="Nucleus"
  data-desc="Controls cell activities and contains DNA."></a-sphere>

 <a-text class="label" value="Nucleus"
  position="0 0.45 0" scale="0.5 0.5 0.5"
  align="center" look-at="[camera]"
  color="yellow"></a-text>
</a-entity>

<!-- NUCLEOLUS -->
<a-entity position="0.05 0.05 0.05">
 <a-sphere class="clickable" radius="0.1" color="pink"
  data-title="Nucleolus"
  data-desc="Produces ribosomes inside the nucleus."></a-sphere>

 <a-text class="label" value="Nucleolus"
  position="0 0.2 0" scale="0.4 0.4 0.4"
  align="center" look-at="[camera]"
  color="yellow"></a-text>
</a-entity>

<!-- MITOCHONDRIA -->
<a-entity position="0.5 0.2 0.4">
 <a-sphere class="clickable" radius="0.15" color="orange"
  data-title="Mitochondrion"
  data-desc="Produces energy for the cell."></a-sphere>

 <a-text class="label" value="Mitochondrion"
  position="0 0.25 0" scale="0.4 0.4 0.4"
  align="center" look-at="[camera]"
  color="yellow"></a-text>
</a-entity>

<!-- RIBOSOMES -->
<a-entity position="0.3 0.1 -0.4">
 <a-sphere class="clickable" radius="0.05" color="brown"
  data-title="Ribosomes"
  data-desc="Site of protein synthesis."></a-sphere>

 <a-text class="label" value="Ribosomes"
  position="0 0.15 0" scale="0.35 0.35 0.35"
  align="center" look-at="[camera]"
  color="yellow"></a-text>
</a-entity>

<!-- GOLGI -->
<a-entity position="0.4 -0.3 -0.2">
 <a-box class="clickable" width="0.4" height="0.1" depth="0.3"
  color="green"
  data-title="Golgi Apparatus"
  data-desc="Packages and transports proteins."></a-box>

 <a-text class="label" value="Golgi Apparatus"
  position="0 0.2 0" scale="0.4 0.4 0.4"
  align="center" look-at="[camera]"
  color="yellow"></a-text>
</a-entity>

</a-entity>

<!-- MARKER -->
<a-marker preset="hiro" id="cellMarker">
 <a-entity id="markerContainer"></a-entity>
</a-marker>

<!-- GPS -->
<a-entity id="cellGPS"
 gps-entity-place="latitude:-13.9626; longitude:33.7741"
 visible="false">
 <a-entity id="gpsContainer"></a-entity>
</a-entity>

</a-scene>

<script>
let gpsMode=false,voiceOn=true,labelsOn=true;
const synth=window.speechSynthesis;

window.onload=()=>{
 const cell=document.getElementById("cellModel");
 markerContainer.appendChild(cell);
 gpsContainer.appendChild(cell.cloneNode(true));

 document.querySelectorAll(".clickable").forEach(el=>{
  el.onclick=e=>{
   const t=e.target.dataset.title;
   const d=e.target.dataset.desc;
   if(t && voiceOn) synth.speak(new SpeechSynthesisUtterance(d));
  };
 });
};

function toggleARMode(){
 gpsMode=!gpsMode;
 cellMarker.setAttribute("visible",!gpsMode);
 cellGPS.setAttribute("visible",gpsMode);
 document.getElementById("status-label").innerText=
  gpsMode?"MODE: GPS LOCATION":"MODE: HIRO MARKER";
}

function toggleVoice(){voiceOn=!voiceOn;}

function toggleLabels(){
 labelsOn=!labelsOn;
 document.querySelectorAll(".label").forEach(l=>{
  l.setAttribute("visible",labelsOn);
 });
}
</script>

</body>
</html>